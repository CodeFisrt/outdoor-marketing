<div class="container mt-5">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white d-flex justify-content-between">
      <h5>{{ editingId ? '✏️ Edit Balloon' : '➕ Add Balloon' }}</h5>
      <button class="btn btn-light btn-sm" routerLink="/dashboard/poll-kiosk">⬅️ Back</button>
    </div>

    <div class="card-body">
      <form [formGroup]="balloonForm" (ngSubmit)="save()">
        <!-- LOCATION -->
        <h6 class="text-primary mb-3">Location Info</h6>
        <div class="row g-3 mb-4">
          <div class="col-md-4">
            <label class="form-label">Location Name *</label>
            <input class="form-control" formControlName="b_location_name" />
            <small class="text-danger" *ngIf="isInvalid('b_location_name')">
              Min 3 characters required
            </small>
          </div>

          <div class="col-md-4">
            <label class="form-label">Area *</label>
            <input class="form-control" formControlName="b_area" />
            <small class="text-danger" *ngIf="isInvalid('b_area')">Required</small>
          </div>

          <div class="col-md-4">
            <label class="form-label">City *</label>
            <input class="form-control" formControlName="b_city" />
            <small class="text-danger" *ngIf="isInvalid('b_city')">Required</small>
          </div>

          <div class="col-md-3">
            <label class="form-label">Latitude *</label>
            <input class="form-control" formControlName="b_lat" />
            <small class="text-danger" *ngIf="isInvalid('b_lat')"> Invalid latitude </small>
          </div>

          <div class="col-md-3">
            <label class="form-label">Longitude *</label>
            <input class="form-control" formControlName="b_long" />
            <small class="text-danger" *ngIf="isInvalid('b_long')"> Invalid longitude </small>
          </div>
        </div>

        <!-- DETAILS -->
        <h6 class="text-primary mb-3">Balloon Details</h6>
        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <label class="form-label">Size *</label>
            <select class="form-select" formControlName="b_size">
              <option value="">--Select--</option>
              <option>10x20</option>
              <option>20x40</option>
              <option>30x60</option>
            </select>
            <small class="text-danger" *ngIf="isInvalid('b_size')">Required</small>
          </div>

          <div class="col-md-3">
            <label class="form-label">Type *</label>
            <select class="form-select" formControlName="b_type">
              <option value="">--Select--</option>
              <option>Hoarding</option>
              <option>Banner</option>
              <option>Billboard</option>
              <option>Digital Screen</option>
            </select>
            <small class="text-danger" *ngIf="isInvalid('b_type')">Required</small>
          </div>

          <div class="col-md-3">
            <label class="form-label">Height (m) *</label>
            <input type="number" class="form-control" formControlName="b_height" />
          </div>

          <div class="col-md-3">
            <label class="form-label">Duration (days) *</label>
            <input type="number" class="form-control" formControlName="b_duration_days" />
          </div>

          <div class="col-md-3">
            <label class="form-label">Start Date *</label>
            <input type="date" class="form-control" formControlName="b_start_date" />
          </div>

          <div class="col-md-3">
            <label class="form-label">End Date *</label>
            <input type="date" class="form-control" formControlName="b_end_date" />
          </div>

          <div class="col-12">
            <small class="text-danger" *ngIf="hasFormError('dateRangeInvalid')">
              End date must be after start date
            </small>
          </div>
        </div>

        <!-- FINANCIAL -->
        <h6 class="text-primary mb-3">Financial</h6>
        <div class="row g-3 mb-4">
          <div class="col-md-4">
            <label class="form-label">Cost *</label>
            <input type="number" class="form-control" formControlName="b_cost" />
          </div>

          <div class="col-md-3">
            <label class="form-label">Payment Status *</label>
            <select class="form-select" formControlName="payment_status">
              <option value="">--Select--</option>
              <option>Paid</option>
              <option>Pending</option>
              <option>Cancelled</option>
            </select>
          </div>
        </div>

        <div class="form-check mb-4">
          <input class="form-check-input" type="checkbox" formControlName="featured" />
          <label class="form-check-label">⭐ Set As Featured</label>
        </div>

        <div class="d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-outline-secondary" (click)="resetForm()">
            Reset
          </button>
          <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
          <button
            type="submit"
            class="btn"
            [ngClass]="{ 'btn-success': !editingId, 'btn-warning': editingId }"
            [disabled]="balloonForm.invalid"
          >
            {{ editingId ? 'Update' : 'Save' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
